{{ $src := .Page.Resources.GetMatch (printf "*%s*" (.Get "src")) }}
{{ $tiny := $src.Resize "1000x" }}

<figure>
  <img 
    src="{{ $tiny.RelPermalink }}" 
    {{ with .Get "alt" }}alt="{{.}}"{{ else }}alt=""{{ end }} 
  />
  {{ with .Get "caption"}}<figcaption>{{ . | safeHTML }}</figcaption>{{ end }}
</figure>